"use strict";"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js").then(function(e){console.log("Service worker registration succeeded:",e)},function(e){console.log("Service worker registration failed:",e)}):console.log("Service workers are not supported.");var numImgs=3;function dlImg(t){for(var e=[],o=1;o<=numImgs;o++){var n=t+o+".png";e.push(img2base64("img/"+n))}console.log("promise array",e),Promise.all(e).then(function(e){e.forEach(function(e,o){setLocalStorage(t+(o+1),e)}),alert("All "+t+" images downloaded.")})}var deferredPrompt,img2base64=function(t){return new Promise(function(o,e){toDataURL(t,function(e){o(e)})})};function toDataURL(e,o){var t=new XMLHttpRequest;t.onload=function(){var e=new FileReader;e.onloadend=function(){o(e.result)},e.readAsDataURL(t.response)},t.open("GET",e),t.responseType="blob",t.send()}function showImg(e){for(var o=[],t=1;t<=numImgs;t++){var n=e+t;o.push(localforage.getItem(n))}Promise.all(o).then(function(e){var t=0;e.forEach(function(e,o){null===e?(document.getElementById("imgOutput"+(o+1)).src="img/error.png",t+=1):document.getElementById("imgOutput"+(o+1)).src=e}),0<t&&alert("Image set failed for "+t+" images failed. They may need to be downloaded first.")})}function setLocalStorage(e,o){localforage.setDriver([localforage.INDEXEDDB]).then(function(){localforage.setItem(e,o,function(){console.log("Saved: "+o+"\nUsing: "+localforage.driver())})})}var btnAdd=document.getElementById("installBtn");window.addEventListener("beforeinstallprompt",function(e){console.log("beforeinstallprompt fired",e),e.preventDefault(),deferredPrompt=e,btnAdd.style.display="block"}),btnAdd.addEventListener("click",function(e){btnAdd.style.opacity=.5,deferredPrompt.prompt(),deferredPrompt.userChoice.then(function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),deferredPrompt=null})});